---
title: å†è§ Hexoï¼Œä½ å¥½ Astroï¼
pubDatetime: 2024-03-20
tags:
  - åšå®¢
description: ç»ˆäºè¿˜æ˜¯æŠµæŒ¡ä¸ä½ Astro çš„è¯±æƒ‘ï¼ŒæŠ›å¼ƒäº† Hexoï¼Œå¼€å§‹äº†æ–°çš„æŠ˜è…¾ä¹‹æ—…ï¼
---

## å¼•è¨€

ä» Hexo åˆ° Jekyllï¼Œå†åˆ° VuePressï¼Œæœ€ç»ˆåˆå›åˆ° Hexoï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºè¿™æ˜¯æˆ‘æœ€åçš„å½’å®¿ã€‚ç„¶è€Œï¼ŒAstro çš„å‡ºç°ï¼Œè®©æˆ‘æ²‰å¯‚çš„å¿ƒåˆæ‚¸åŠ¨èµ·æ¥ã€‚

æœ€è¿‘ï¼ŒAstro å¯è°“æ˜¯ç«éäº†æ•´ä¸ªåšå®¢åœˆã€‚çœ¼çœ‹ç€ä¼—å¤šåšä¸»çº·çº·ä» Hexo æˆ–è€…å…¶ä»–å¹³å°è¿ç§»åˆ° Astroï¼Œæˆ‘åŸæœ¬å¹¶æœªæ”¾åœ¨å¿ƒä¸Šã€‚ç›´åˆ°æˆ‘æ€€ç€å¥½å¥‡ç‚¹å¼€äº† Astro çš„[ä¸»é¢˜é¡µé¢](https://astro.build/themes/)ï¼Œæ˜ å…¥çœ¼å¸˜çš„ [AstroPaper](https://astro-paper.pages.dev) ä¸»é¢˜ä»¤æˆ‘æƒŠå¹ä¸å·²ã€‚å®ƒç«Ÿç„¶å¦‚æ­¤ä¸æ»‘æµç•…ï¼Œå†ç‚¹å¼€ Astro [ä»‹ç»é¡µ](https://astro.build/)ä¸€çœ‹ï¼ŒOKï¼è¿™å°±ç«‹åˆ»è¿ç§»åˆ° Astro å¹³å°ã€‚

## è¿ç§»è¿‡ç¨‹

è¿ç§»è¿‡ç¨‹è¿˜ç®—é¡ºåˆ©ï¼Œä½†ä¸ºäº†æ»¡è¶³ä¸ªäººéœ€è¦ï¼Œè¿˜æ˜¯ä¸‹äº†ä¸€äº›åŠŸå¤«ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚

### å…¼å®¹æ—§é“¾æ¥

ç”±äº Astro çš„é¡µé¢è·¯å¾„ä¸ Hexo ä¸åŒï¼Œæˆ‘éœ€è¦åšä¸€äº›å…¼å®¹å¤„ç†ï¼Œä¿è¯æ—§é“¾æ¥ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸è®¿é—®ã€‚

ä»¥å‰åœ¨ Hexo ä¸­ï¼Œæˆ‘å¯ä»¥é€šè¿‡ `permalink` å­—æ®µè‡ªå®šä¹‰æ–‡ç« è·¯å¾„ã€‚ç„¶è€Œï¼ŒAstro çš„æ–‡ç« è·¯å¾„æ˜¯ç”± md æ–‡ä»¶åå†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¹‹å‰ä¸€ç¯‡åä¸º â€œ2023 å¹´åº¦æ€»ç»“â€ çš„æ–‡ç« ï¼Œå…¶ `permalink` è®¾ç½®ä¸º post/2023-summary.htmlï¼Œä½†åœ¨ Astro ä¸­ï¼Œå®ƒçš„è·¯å¾„å˜ä¸º posts/2024-01-01-2023-summaryã€‚

ä¸è¿‡å¥½åœ¨ Astro å¤„ç†èµ·æ¥å¹¶ä¸å¤æ‚ã€‚åªéœ€åˆ›å»ºä¸€ä¸ªåä¸º `post/[slug]/index.astro` çš„é¡µé¢ï¼Œå¹¶åœ¨æ­¤é¡µé¢ä¸­å¤„ç†é“¾æ¥ï¼Œå°†å…¶ä¸ md æ–‡ä»¶ä¸­çš„ `permalink` å­—æ®µè¿›è¡Œæ˜ å°„å³å¯ã€‚

é¦–å…ˆä¿®æ”¹ `src/content/config.ts`ï¼Œè®©å®ƒè¯»å– md æ–‡ä»¶çš„ permalink å­—æ®µï¼š

```ts
const blog = defineCollection({
  type: "content",
  schema: ({ image }) =>
    z.object({
      ...
      permalink: z.string().optional(), // [!code ++]
    }),
});
```

ç„¶ååœ¨ src/pages/post/[slug]/index.astro å¤„ç† permalink çš„åŒ¹é…å³å¯ï¼Œç”±äºä»£ç è¿‡é•¿è¿™é‡Œå°±ä¸è´´äº†ï¼Œæœ‰å…´è¶£ç‚¹è¿™é‡ŒæŸ¥çœ‹ï¼š[src/pages/post/[slug]/index.astro](https://github.com/gd4Ark/gd4Ark.github.io/blob/astro-paper/src/pages/post/%5Bslug%5D/index.astro)

### æ–‡ç« ç›®å½•

AstroPaper ä¸»é¢˜æœ¬èº«ä¸å…·å¤‡ TOC åŠŸèƒ½ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œæˆ‘å‚è€ƒ [Astro Cactus](https://astro-theme-cactus.netlify.app/) ä¸»é¢˜ï¼Œæ·»åŠ äº†ä¸€ä¸ª TOC ç»„ä»¶ï¼Œæ–¹ä¾¿é˜…è¯»ï¼Œçœ‹æœ¬ç¯‡æ–‡ç« å³ä¾§æ•ˆæœ ğŸ‘‰

### Disqus è¯„è®ºç»„ä»¶

AstroPaper ä¸»é¢˜ä¹Ÿæ²¡æœ‰è¯„è®ºç»„ä»¶ï¼Œæˆ‘å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://webdesign-sopelnik.de/en/blog/adding-comments-to-your-astro-blog-with-disqus/)ï¼Œæ·»åŠ äº† Disqus è¯„è®ºç»„ä»¶ã€‚

### ä»£ç é«˜äº®ä¸»é¢˜åˆ‡æ¢

Astro ä½¿ç”¨ Shiki ä½œä¸ºä»£ç é«˜äº®å™¨ï¼ŒåŸç”Ÿæ”¯æŒæµ…è‰²å’Œæ·±è‰²ä¸¤ç§ä¸»é¢˜ã€‚ç„¶è€Œï¼Œå½“æˆ‘é…ç½®å®Œæˆåï¼Œå´å‘ç°åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼æ—¶ä»£ç é«˜äº®ä¸»é¢˜å¹¶æœªç”Ÿæ•ˆã€‚ç»è¿‡æ’æŸ¥ï¼Œæˆ‘å‘ç° Astro æ˜¯ç›´æ¥å°†æ ·å¼å†™åˆ° code æ ‡ç­¾çš„ style å±æ€§ä¸­ï¼Œè€Œåˆ‡æ¢æ·±è‰²æ¨¡å¼æ—¶å¹¶ä¸ä¼šæ”¹å˜è¿™äº›æ ·å¼ã€‚å› æ­¤ï¼Œéœ€è¦åœ¨ `base.css` æ–‡ä»¶ä¸­æ‰‹åŠ¨è¦†å†™æ ·å¼æ‰èƒ½å®ç°ä»£ç é«˜äº®ä¸»é¢˜çš„åˆ‡æ¢ã€‚

```css
html[data-theme="dark"] .astro-code,
html[data-theme="dark"] .astro-code span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
  /* Optional, if you also want font styles */
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}
```

æ­¤å¤–ï¼ŒShiki è¿˜æ”¯æŒ transformers æ ·å¼ï¼ˆå°±æ˜¯ä¸Šé¢é‚£ç§ diff æ ·å¼ï¼‰ï¼Œéœ€è¦é¢å¤–é…ç½®æ ·å¼æ‰èƒ½ç”Ÿæ•ˆã€‚æœ‰å…´è¶£å‚è€ƒ [src/styles/base.css](https://github.com/gd4Ark/gd4Ark.github.io/blob/astro-paper/src/styles/base.css)ï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚

### RSS

Astro è‡ªå¸¦ RSS æ’ä»¶ï¼Œç”¨å°±å®Œäº‹äº†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯ä¸å¸¦å…¨æ–‡çš„ï¼Œå¦‚éœ€å…¨æ–‡è¾“å‡ºï¼Œå¯ä½¿ç”¨ sanitize-html å’Œ markdown-it è¿›è¡Œè§£æå’Œè¾“å‡ºï¼Œå…·ä½“æ–¹æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚

æ­¤å¤–ï¼ŒAstroPaper ä¸»é¢˜åªæœ‰ /rss.xml è¿™ç§è·¯å¾„ï¼Œè€Œæˆ‘ä¹‹å‰çš„åšå®¢åŒæ—¶æ”¯æŒ /rss.xml å’Œ /atom.xml ä¸¤ç§è·¯å¾„ã€‚ä¸ºäº†é¿å…æ›´æ–°åšå®¢åè®¢é˜…è€…ï¼ˆå¦‚æœæœ‰çš„è¯..ï¼‰æ— æ³•æ­£å¸¸æ”¶åˆ°æ–‡ç« æ›´æ–°ï¼Œæˆ‘å°† `rss.xml.ts` æ–‡ä»¶å¤åˆ¶ä¸€ä»½å¹¶å‘½åä¸º `atom.xml.ts`ã€‚å¦‚æœéœ€è¦æ”¯æŒå…¶ä»–è·¯å¾„ï¼ŒåŒæ ·æ–¹å¼å¤„ç†å³å¯ã€‚

## æ•´ä½“æ„Ÿå—

ä»¥å‰å¯¹ Hexo ä¸»é¢˜çš„åšå®¢ä¹Ÿåšäº†ä¸å°‘å®šåˆ¶åŒ–çš„å·¥ä½œï¼Œä½†æ”¹èµ·æ¥æ€»è§‰å¾—æœ‰ç‚¹åˆ«æ‰­çš„ï¼Œå¯èƒ½æ˜¯å› ä¸º ejs æˆ–è€… swig å¼•æ“çš„ç¼˜æ•…ï¼ŒAstro ä½¿ç”¨ç±»ä¼¼ Vue çš„è¯­æ³•ï¼Œå¹¶æä¾›äº† Next.js ä¸€æ ·çš„è·¯ç”±å’Œæ„å»ºæ–¹å¼ï¼Œè®©å¼€å‘æ›´åŠ è‡ªç„¶æµç•…ã€‚

è€Œåœ¨ç”¨æˆ·ä½“éªŒä¸Šï¼Œå¾—ç›Šäº View Transitions API çš„åŠ æŒï¼Œä½¿åˆ‡æ¢é¡µé¢æ›´åŠ æµç•…ï¼Œæ— ç¼è¡”æ¥ã€‚

æ€»ä¹‹ï¼Œçš„ç¡®ä¸é”™ã€‚å¦‚æœä½ ä¹Ÿå–œæ¬¢æŠ˜è…¾ï¼Œé‚£å°±å¿«æ¥è¯•è¯• Astro å§ï¼
